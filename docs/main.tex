\section{Използвани езици и технологии}

\input{used_stack/rust}

% \subsection{PDF}
% PDF е файлов формат създаден от Adobe през 1992г. предназначен да бъде преносим
% документ, независим от хардуера и софтуера. Всеки един PDF файл съдържа пълно
% описание на начина по който трябва да изглежда документа \cite{PDF_Wikipedia}.
%
% \subsubsection{Технически детайли}
% PDF най-често е комбинация от векторни графики и текст.
%
% В по-нови ревизии на PDF станзарта, документите могат да имат линкове които можем да отворим и подръжка за plugin-и.

\newpage
\input{used_stack/egui}

\input{used_stack/genpdf}

\newpage

\section{Подготовка}
Преди да започнем с разработката на софтуера трябва да настроим нашета среда за
разработка. Тя включва Rust компилатора, текстов редактор (IDE) и Git за
контрол на версиитe.

\input{setup/rust-install}
\newpage
\input{setup/text-editor}
\input{setup/git}

\newpage

\section{Разработка}

\subsection{Създаване на проекта}
За да създадем нов Rust проект, трябва до отворим конзолата и да изпълним следната команда:
\begin{lstlisting}
cargo new test-generator
\end{lstlisting}

Тя ще генерира папка със името test-generator в която се намира проекта.
В src се намират файловете в които пишем кода, а в Cargo.toml файла се намира
конфигурацията на проекта.

За да отворим проекта в текстов редактор може да напишем комантада `code .` за
да го отворим във VSCode или `nvim .` за да го отворим във Neovim.
 
\begin{figure}[!htb]
  \includegraphics[scale=0.60]{new-rust-project}
  \centering
  \caption{Файловата структура на Rust проекта}
  \label{fig:new-rust-project}
\end{figure}

\subsection{Добавяне на библиотеки}

\subsubsection{Конзолни аргументи}
Аргументите на конзолата са параметри, предавани на програма преди изпълнение
на поргамата в командния ред. В Rust аргументите могат да бъдат достъпени чрез
функцията std::env::args(), която връща итератор над аргументите като списък от
низове.

За да вземем подходящата информация за приложението може да напишм наш собствен
анализатор или да изплозваме една от многото различни библиотеки за работа с
конзолни аргументи. Една от най-използваните библиотеки е clap (Console Line
Argument Parser).

Clap ни предоставя с clap::Parser макрото, което при компилирането на програмата
анализира структурата от данни и автоматично търси командните аргументи при екзекуция.
Също тъка проверява кои аргументи са маркирани като задължителни или такива със
стойност по подразбиране.
% TODO: add image

При въвеждане на грешни аргументи или при липсата на задължителните такива, Clap
показва автоматично генерираното помощно съобщение на потребителя.

% TODO: add image

\subsubsection{Serde}
Serde е framework за ефективно сериализиране и десериализиране на структури от данни в Rust.

Екосистемата на Serde се състои от структури от данни, които знаят как да
сериализират и десериализират себе си заедно с формати на данни, които знаят
как да сериализират и десериализират други неща. Serde предоставя слоя, чрез
който тези две групи взаимодействат помежду си, позволявайки всяка поддържана
структура от данни да бъде сериализирана и десериализирана с помощта на всеки
поддържан формат на данни.

Докато много други езици разчитат на runtime среда (като Dotnet) за
сериализиране на данни, Serde вместо това е изградена върху много добрата
интерфес система на Rust.

Структура от данни, която знае как да сериализира и десериализира сама себе си,
е тази, която използва интерфейсите на Serde за сериализиране и десериализиране
(или използва атрибута derive на Serde за автоматично генериране на интерфеси
по време на компилация). По този начин се избягват забавянето от употребата на
runtime среда.

Всъщност в много ситуации взаимодействието между структурата на данните и
формата на данните може да бъде напълно оптимизирано от Rust компилатора,
оставяйки сериализацията на Serde да се изпълни със същата скорост като
ръно написан сериализатор в езици от по-ниско ниво като C.

\subsubsection{Toml}
Toml е библиотека която използва Serde API-a за да добави подръжка за TOML
(Tom's Obvious Minimal Language) формата. Този формат ще бъде използван за
съхраняване на настройките, въпросите и друга информация за теста.

% TODO: explain how toml is integrated with serde
% TODO: exmaple?

% [x] cargo new test-generator
% [x] open in text editor
% [ ] import libraries
%     [x] clap
%     [x] serde
%     [ ] toml
%     [ ] genpdf
%     [ ] egui
%     [ ] egui-notify
% [ ] create data structures
%     [ ] Project
%         [ ] Question
%             [ ] SelectionQuestion
%             [ ] InputQuestion
% [x] create command line arguments (clap)
%     [x] describe what clap is and how it works
% [ ] create pdf generator
%     [ ] create elements
%         [ ] AlphabeticOrderedList
%         [ ] CharRepeat
%         [ ] SplitElement
%     [ ] setting up the pdf library
%     [ ] generating header
%     [ ] generating questions
%     [ ] generating footer
% [ ] create gui
%     [ ] create questions tab
%     [ ] create configuration tab
%     [ ] create settings tab
% [ ] optimizing builds
% [ ] building for different platforms (MacOS, Windows & Linux)
